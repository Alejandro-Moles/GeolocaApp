<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <title>GeoAR.js</title>
    <script src="https://aframe.io/releases/1.0.4/aframe.min.js"></script>
    <script src="https://unpkg.com/aframe-look-at-component@0.8.0/dist/aframe-look-at-component.min.js"></script>
    <script src="https://raw.githack.com/AR-js-org/AR.js/master/aframe/build/aframe-ar-nft.js"></script>
  </head>

  <body style="margin: 0; overflow: hidden;">
    <div id="mensaje" style="border: 1px solid black;"></div>

    <a-scene vr-mode-ui='enabled: false' embedded arjs='sourceType: webcam; sourceWidth:1280; sourceHeight:960; displayWidth: 1280; displayHeight: 960; debugUIEnabled: false;'>
    <a-camera gps-camera rotation-reader></a-camera>
     
    </a-scene>
  </body>

  <script>
  
    window.onload = ()=>
    {
        cargarModelos();
        
    }

    function cargarModelos(){
        var modelos = [
            {
                latitud: 37.191121, 
                longitud: -3.623371,
                //aqui va el texto
                texto: "Alhambra",
                //aqui va la ruta de la imagen
                imagen: "https://res.cloudinary.com/hello-tickets/image/upload/c_limit,f_auto,q_auto,w_1300/v1624372525/cb8fyeobqwc3vizrn2gh.jpg",
                //aqui va la ruta del video
                video: "https://www.youtube.com/watch?v=4dNiueKSM9I"
            }
        ];

        
        for (var i = 0; i < modelos.length; i++){
            //esto es para el texto
            crearTexto(modelos[i].texto, modelos[i].latitud, modelos[i].longitud)
            crearImagen(modelos[i].imagen, modelos[i].latitud, modelos[i].longitud)
            crearVideo(modelos[i].video, modelos[i].latitud, modelos[i].longitud)
        }
    }

    //funcion que crea el texto
    function crearTexto(text, latitud, longitud){
        var modeloTexto = document.createElement('a-text');
        console.log(text);
        modeloTexto.setAttribute('value', text);
        modeloTexto.setAttribute('scale', '0.5 0.5 0.5');
        modeloTexto.setAttribute('gps-entity-place', `latitude: $latitud; longitude: $longitud;`);
    
        console.log(latitud);
        console.log(longitud);
        var scene = document.querySelector('a-scene');
        scene.appendChild(modeloTexto);
    }

    //funcion que crea la imagen
    function crearImagen(imagen, latitud, longitud){
       var modeloImagen = document.createElement("a-imagen");
       modeloImagen.setAttribute('src', imagen);
       modeloImagen.setAttribute('scale', '0.5 0.5 0.5');
       modeloImagen.setAttribute('gps-entity-place', `latitude: $latitud; longitude: $longitud;`);
      
       console.log(imagen);
       var scene = document.querySelector('a-scene');
       scene.appendChild(modeloImagen);
    }

    //funcion que crea el video
    function crearVideo(video, latitud, longitud){
        var modeloVideo = document.createElement("a-video");
        modeloVideo.setAttribute('src', video);
        modeloVideo.setAttribute('scale', '0.5 0.5 0.5');
        modeloVideo.setAttribute('position', '90 0 0');
        modeloVideo.setAttribute('gps-entity-place', `latitude: $latitud; longitude: $longitud;`);
      
        console.log(video);
        var scene = document.querySelector('a-scene');
        modeloVideo.appendChild(modeloVideo);
    }
  
  </script>

</html>
